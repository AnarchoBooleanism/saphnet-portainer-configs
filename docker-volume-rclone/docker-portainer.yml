services:
  docker-volume-rclone:
    image: ghcr.io/anarchobooleanism/docker-volume-rclone@sha256:f477a83b3a045a90c1bdcf909f545027b8cfbe7068c169d2e352652f5ab72dcd
    environment:
      - TARGET_SUBDIR_NAME=docker-portainer
      - RUN_ON_STARTUP=FALSE
      - CRON_ARGUMENTS=30 * * * * # The 30th minute of every hour
      # - RCLONE_OPTIONS=
      - TZ=America/Los_Angeles
    volumes:
      - portainer-server_portainer_data:/volumes/portainer-server_portainer_data:ro
      - nfs-target:/volumes-clone

volumes:
  portainer-server_portainer_data:
    external: true
  nfs-target:
    driver_opts:
      type: "nfs"
      o: "addr=nas1.int-net.saphnet.xyz,nolock,soft,rw,nfsvers=4"
      device: ":/mnt/saphnet-nas1b/docker-volumes"